<h2><%= @workout.workout_date %> のトレーニング</h2>
<p><strong>メモ:</strong> <%= simple_format(@workout.notes) %></p>

<%= link_to "編集", edit_workout_path(@workout), class: "btn btn-secondary" %>
<%= link_to "削除", workout_path(@workout),
            data: { turbo_method: :delete, turbo_confirm: "削除しますか？" },
            class: "btn btn-danger" %>

<hr>

<h3 class="mt-4">セット記録</h3>

<%= link_to "新しいセットを追加", new_workout_workout_set_path(@workout),
            class: "btn btn-warning mb-3" %>

<% if @exercise_sets.present? %>

  <% @exercise_sets.each do |exercise, sets| %>
    <div class="exercise-card mb-4 p-3">

      <!-- 種目名と総セット数 -->
      <h4 class="mb-3">
        <%= exercise.name %>（<%= sets.size %>セット）
      </h4>

      <!-- セット一覧 -->
      <% sets.each_with_index do |set, idx| %>
        <div class="set-row mb-2">
          <strong><%= idx + 1 %></strong>：
          <%= set.weight || "-" %> kg × <%= set.reps || "-" %> 回
        </div>

        <% if set.memo.present? %>
          <div class="exercise-memo ms-4 mb-2">
            <%= set.memo %>
          </div>
        <% end %>
      <% end %>

    </div>
  <% end %>

<% else %>
  <p>まだセットが登録されていません。</p>
<% end %>
